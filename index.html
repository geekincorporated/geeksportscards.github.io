<!-- Back to Top Button placed just before </body> for correct DOM availability -->

<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <meta charset="UTF-8">
    <title>Geek Sports Cards and Collectables</title>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.counter.dev/script.js" data-id="18805968-c523-41d4-a5fc-6a39864fa88e"
        data-utcoffset="-6"></script>
    <style>
        /* enable smooth scrolling for anchor and programmatic scrolls */
        html {
            scroll-behavior: smooth;
        }

        .su-card-seller a {
            color: #111 !important;
            text-decoration: none !important;
        }

        /* Back to Top button (hidden until header is out of view) */
        #backToTopBtn {
            position: fixed;
            right: 24px;
            bottom: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 48px;
            height: 48px;
            background: #1d2731;
            color: #fff;
            border-radius: 50%;
            /* flat button - no shadow and no border */
            border: none;
            outline: none;
            appearance: none;
            -webkit-appearance: none;
            font-size: 1.4em;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.25s, transform 0.25s;
            transform: translateY(8px);
            text-decoration: none;
            z-index: 9999;
        }

        #backToTopBtn.visible {
            opacity: 1;
            pointer-events: auto;
            transform: translateY(0);
        }

        .items-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .s-card.s-card--horizontal {
            display: flex;
            /* stretch children so containers are equal height and absolute action button aligns */
            align-items: stretch;
            /* a sensible desktop min-height to align action buttons across cards */
            min-height: 420px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 18px;
            padding: 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .su-card-container.su-card-container--horizontal {
            display: flex;
            width: 100%;
            /* allow absolutely positioned actions inside the card container */
            position: relative;
            /* provide room at the bottom so absolute action button doesn't overlap content */
            padding-bottom: 64px;
            box-sizing: border-box;
        }

        .su-card-container__media {
            flex: 0 0 220px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 16px;
            position: relative;
        }

        .su-card-external-link {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 2;
            display: flex;
            flex-direction: column;
            gap: 7px;
            align-items: flex-end;
        }

        .su-card-external-link a {
            text-decoration: none;
        }

        .su-card-external-link i.fas.fa-external-link {
            font-size: 0.98em;
            color: #222;
            background: #fff;
            border-radius: 50%;
            padding: 3.5px;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.10);
        }

        .su-card-img {
            width: 240px;
            height: 240px;
            object-fit: contain;
            border-radius: 4px;
            background: #f8f8f8;
        }

        .su-card-seller-info {
            color: #888;
            font-size: 0.75em;
            margin-top: 8px;
            text-align: center;
            width: 100%;
        }

        .su-card-seller {
            margin-top: 2px;
        }

        .su-card-container__content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 16px 0;
        }

        .su-card-title-link {
            text-decoration: none;
            color: #222;
        }

        .s-card__title {
            font-size: 1em;
            font-weight: bold;
            margin-bottom: 12px;
        }

        .su-card-details {
            font-size: 0.80em !important;
            color: #444;
            margin-bottom: 8px;
        }

        .su-card-label {
            font-weight: bold;
        }

        .su-card-category {
            font-weight: normal;
        }

        .su-card-spacer {
            height: 8px;
        }

        .su-card-ebay {
            font-family: sans-serif;
            font-weight: bold;
            vertical-align: middle;
            color: #e53238;
        }

        .su-card-container__attributes {
            margin-top: 8px;
        }

        /* removed empty ruleset for .su-card-container__attributes__primary */
        .s-card__attribute-row {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .su-card-price {
            font-size: 1.75em;
            font-weight: bold;
            color: #111;
        }

        .su-card-shipping {
            font-size: 0.95em !important;
            font-weight: normal;
            color: #555;
        }

        .su-card-bids-time {
            font-size: 1em;
            color: #555;
            display: flex;
            flex-direction: column;
            text-align: left;
            align-items: flex-start;
            overflow: hidden;
        }

        .su-card-timeleft {
            margin-left: 8px;
        }

        .su-card-bids-time div {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .su-card-action-btn {
            /* center the action button horizontally under the image */
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            justify-content: center;
            width: auto;
            z-index: 3;
        }

        .shipping-info-box {
            width: 100%;
            max-width: 100vw;
            background: #fff;
            border-radius: 0;
            box-shadow: none;
            margin: 0;
            padding: 32px 24px 24px 24px;
            box-sizing: border-box;
        }

        .shipping-info-box .shipping-info-title,
        .shipping-info-box .shipping-info-section {
            padding-left: 10px;
            padding-right: 10px;
        }

        .shipping-info-title {
            margin-top: 0;
            font-size: 1.5em;
            color: #1d2731;
            text-align: left;
        }

        .shipping-info-section {
            margin-bottom: 14px;
        }

        @media (max-width: 1000px) {
            .s-card__title {
                font-size: 1.22em !important;
            }

            .su-card-details {
                font-size: 1.08em !important;
            }

            .shipping-info-box {
                padding: 10px 5px 10px 5px !important;
            }

            /* Removed all #backToTopBtn logic for small/mobile screens */
            .custom-footer {
                display: block;
            }

            #shippingModalContent {
                position: fixed !important;
                left: 5px !important;
                right: 5px !important;
                top: 50% !important;
                transform: translateY(-50%) !important;
                margin: 0 !important;
                padding: 5px !important;
                width: auto !important;
                max-width: none !important;
                min-width: 0 !important;
                border-radius: 14px !important;
                box-shadow: none !important;
            }

            a[style*='background:#0d6efd'] {
                font-size: 1.12em !important;
                padding: 11px 22px !important;
            }
        }

        @media (max-width: 500px) {

            .custom-footer,
            .footer-bar,
            .footer-p,
            .footer-copyright {
                font-size: 1.50em !important;
            }
        }

        @media (max-width: 600px) {
            #backToTopBtn {
                bottom: 35vh !important;
                /* Force much higher above footer for small screens */
                right: 10vw !important;
                z-index: 9999 !important;
                width: 40px !important;
                height: 40px !important;
                font-size: 1.0em !important;
            }

            #backToTopBtn i {
                font-size: 0.95em !important;
            }

            .shipping-info-box {
                padding: 4px 2px 4px 2px !important;
            }

            /* Allow cards to size naturally on mobile; remove desktop min-height */
            .s-card.s-card--horizontal {
                min-height: 0 !important;
                align-items: flex-start !important;
            }
        }

        #sideMenuLinks {
            margin-top: 24px;
        }

        #sideMenuLinks ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        #sideMenuLinks ul li {
            border-bottom: 1px solid #eee;
        }

        #sideMenuLinks ul li:last-child {
            border-bottom: none;
        }

        #sideMenuLinks ul li a {
            display: flex;
            align-items: center;
            color: #222;
            text-decoration: none;
            font-size: 1em;
            padding: 10px 0;
            transition: background 0.2s, color 0.2s;
        }

        /* Increase size for Filters link and icon */
        #sideMenuLinks ul li.sidebar-filters-menu>a {
            font-size: 1.15em;
            font-weight: bold;
        }

        #sideMenuLinks ul li.sidebar-filters-menu>a i.fa-filter {
            font-size: 1.5em;
            margin-right: 14px;
        }

        #sideMenuLinks ul li a i {
            margin-right: 10px;
            font-size: 1.1em;
            color: #888;
        }

        #sideMenuLinks ul li a:hover {
            background: #f2f2f2;
            color: #0d6efd;
        }

        #resultsCount,
        .results-count-text {
            font-size: 1em;
        }

        #resultsCount {
            padding-left: 25px;
        }

        html,
        body {
            height: 100%;
            min-height: 100%;
        }

        html,
        body {
            width: 100vw !important;
            overflow-x: hidden !important;
        }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background: #fff;
            font-size: 1em;
            line-height: 1.4;
            word-break: break-word;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            /* Reserve space at the bottom equal to footer height so fixed footer doesn't overlap content
                    This uses the CSS variable defined on .custom-footer which may be adjusted via JS. */
            padding-bottom: var(--footer-height, 64px);
        }

        img,
        picture,
        video,
        canvas,
        svg {
            display: block;
            max-width: 100%;
            height: auto;
        }

        .container-main {
            max-width: 1600px;
            width: 100%;
            margin: 0 auto;
            /* Use the footer height CSS variable so the fixed footer does not cover content
               and allow a small extra gap (16px) for breathing room */
            padding: 0 18px calc(var(--footer-height, 64px) + 16px) 18px;
            box-sizing: border-box;
            display: block;
            flex: 1 0 auto;
        }

        .custom-header {
            background: #1d2731;
            color: #fff;
            font-family: 'Bebas Neue', Arial, Helvetica, sans-serif !important;
            border: none;
            padding: 16px 0 8px 0 !important;
            width: 100vw !important;
            min-width: 100vw !important;
            max-width: 100vw !important;
            margin: 0 !important;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 125px;
        }

        .header-title {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            font-size: 4em;
            font-weight: bold;
            letter-spacing: 0.04em;
            width: 100%;
            text-align: center;
            user-select: none;
            padding-bottom: 0 !important;
            margin-bottom: 0 !important;
        }

        .header-geek {
            color: #fff;
        }

        .header-sports {
            color: #D9B310;
            margin: 0 0.08em;
        }

        .header-cards {
            color: #fff;
        }

        .custom-header img {
            width: 60%;
            height: 90px;
            display: block;
            margin: 0;
            padding-left: 0;
            max-width: 100%;
            object-fit: contain;
        }

        .search-outer-container {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
            padding: 18px 0 24px 0;
            background: transparent;
            box-sizing: border-box;
        }

        #customSearchContainer {
            margin-left: auto;
            margin-right: auto;
            position: relative;
            max-width: 420px;
            width: 100%;
            display: flex;
            justify-content: center;
            box-sizing: border-box;
        }

        #customSearchContainer input[type="text"] {
            width: 100% !important;
            min-width: 0 !important;
            max-width: 100% !important;
            box-sizing: border-box !important;
            margin-left: 0 !important;
            margin-right: 0 !important;
            font-size: 1em !important;
            height: 30px !important;
            padding-right: 38px;
            padding-left: 5px;
        }

        .search-icon-inside {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #888;
            font-size: 0.90em;
            pointer-events: none;
        }

        #clearSearchBtn {
            position: absolute;
            right: 38px;
            top: 50%;
            transform: translateY(-50%);
            height: 22px;
            width: 22px;
            border: none;
            background: transparent;
            font-size: 0.90em;
            line-height: 1;
            color: #888;
            cursor: pointer;
            display: none;
            padding: 0;
        }

        #sidebar {
            display: block;
            min-width: 220px;
            max-width: 220px;
            padding: 20px 10px 10px 60px;
            margin-right: 20px;
            border-right: 1px solid #ccc;
            font-size: 0.80em;
            box-sizing: border-box;
            word-break: break-word;
        }

        #itemsGrid {
            display: flex;
            flex-wrap: wrap;
            gap: 24px 2.5%;
            margin-top: 18px;
        }

        #itemsGrid ul {
            display: contents;
        }

        .s-card.s-card--horizontal {
            width: calc(50% - 1.25%);
            min-width: 340px;
            box-sizing: border-box;
            transition: width 0.2s;
            word-break: break-word;
        }

        .su-card-container__media img {
            width: 100%;
            height: auto;
            max-width: 100%;
            object-fit: contain;
            display: block;
        }

        .s-card__title,
        .su-card-container__content,
        .su-card-container__attributes {
            word-break: break-word;
        }

        table.dataTable {
            width: 100% !important;
            table-layout: auto !important;
            word-break: break-word;
        }

        @media (max-width: 1100px) {
            .custom-header img {
                width: 80vw !important;
                max-width: 80vw !important;
                height: 60px !important;
            }

            #sidebar {
                min-width: 160px;
                max-width: 160px;
                padding-left: 30px;
            }

            .s-card.s-card--horizontal {
                min-width: 220px;
                width: 100% !important;
            }
        }

        @media (max-width: 1000px) {
            #shippingModalContent {
                position: fixed !important;
                left: 5px !important;
                right: 5px !important;
                top: 50% !important;
                transform: translateY(-50%) !important;
                margin: 0 !important;
                padding: 5px !important;
                width: auto !important;
                max-width: none !important;
                min-width: 0 !important;
                border-radius: 14px !important;
                box-shadow: none !important;
            }

            .s-card__attribute-row {
                flex-wrap: nowrap !important;
                white-space: nowrap !important;
            }

            .search-icon-inside {
                font-size: 1.5em !important;
                right: 18px !important;
            }

            body {
                font-size: 0.90em;
            }

            .container-main {
                padding-left: 0 !important;
                padding-right: 0 !important;
                width: 100vw !important;
                max-width: 100vw !important;
                margin: 0 !important;
            }

            .custom-header img {
                width: 90vw !important;
                max-width: 90vw !important;
                min-width: 0 !important;
                height: 48px !important;
                padding-left: 0 !important;
                padding-top: 0 !important;
                margin-left: 0 !important;
            }

            #sidebar {
                display: none !important;
                min-width: 0 !important;
                max-width: 100% !important;
                border-right: none !important;
                margin-right: 0 !important;
                padding: 10px 0 0 0 !important;
            }

            #sidebar form {
                display: flex;
                flex-wrap: wrap;
                gap: 8px 0;
            }

            #sidebar>* {
                width: 100%;
            }

            .container-main>div[style*="display: flex;"] {
                flex-direction: column !important;
            }

            #itemsGrid {
                display: block !important;
            }

            #itemsGrid ul {
                flex-direction: column !important;
                gap: 12px 0 !important;
            }

            .s-card.s-card--horizontal {
                width: auto !important;
                max-width: calc(100vw - 5px) !important;
                min-width: 0 !important;
                margin-left: 10px !important;
                margin-right: 15px !important;
                box-sizing: border-box !important;
                padding: 0 !important;
            }

            .su-card-container__media img {
                width: 100% !important;
                height: auto !important;
                max-width: 100vw !important;
            }

            #customSearchContainer {
                max-width: 94vw !important;
                width: 94vw !important;
                margin-left: auto !important;
                margin-right: auto !important;
                padding-left: 20px !important;
                padding-right: 5px !important;
                padding-top: 5px !important;
                display: flex !important;
                justify-content: center !important;
                box-sizing: border-box !important;
            }

            #customSearchContainer input[type="text"] {
                width: 94vw !important;
                min-width: 0 !important;
                max-width: 94vw !important;
                box-sizing: border-box !important;
                margin-left: 0 !important;
                margin-right: 0 !important;
                font-size: 1.5em !important;
                height: 44px !important;
                padding-left: 5px !important;
            }

            a[style*='background:#0d6efd'] {
                font-size: 1.12em !important;
                padding: 11px 22px !important;
            }

            .search-outer-container {
                padding: 8px 0 32px 0;
            }

            #resultsCount,
            .results-count-text {
                font-size: 1.10em;
            }
        }

        .sidebar-section-title {
            margin-top: 10px;
            margin-bottom: 2px;
            font-weight: bold;
        }

        .sidebar-clear-btn {
            margin-top: 14px;
            margin-bottom: 14px;
        }

        .main-content-flex {
            flex: 1;
        }

        .custom-footer {
            background: #1d2731;
            color: #fff;
            text-align: center;
            font-size: 1em;
            padding: 16px 0 12px 0;
            position: fixed;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 200;
            box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.10);
            /* expose a footer height variable so floating elements can position relative to it */
            --footer-height: 64px;
        }

        #shippingModal {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.45);
            align-items: center;
            justify-content: center;
        }

        #shippingModalContent {
            background: #fff;
            max-width: 480px;
            width: 92vw;
            min-width: 0;
            padding: 32px 24px 24px 24px;
            border-radius: 14px;
            box-shadow: 0 4px 32px rgba(0, 0, 0, 0.18);
            margin: auto;
            position: relative;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            box-sizing: border-box;
        }

        @media (max-width: 600px) {
            #shippingModalContent {
                width: 98vw !important;
                max-width: 98vw !important;
                min-width: 0 !important;
                left: 1vw !important;
                right: 1vw !important;
                padding: 10px 5px 10px 5px !important;
                border-radius: 12px !important;
            }
        }

        @media (max-width: 400px) {
            #shippingModalContent {
                width: 100vw !important;
                max-width: 100vw !important;
                min-width: 0 !important;
                left: 0 !important;
                right: 0 !important;
                padding: 4px 2px 4px 2px !important;
                border-radius: 8px !important;
            }
        }

        /* On very small screens increase bottom padding to ensure fixed footer doesn't cover content
           and give extra space for mobile browser UI (address bar / soft nav) */
        @media (max-width: 600px) {
            .container-main {
                padding-bottom: calc(var(--footer-height, 64px) + 32px) !important;
            }

            body {
                padding-bottom: calc(var(--footer-height, 64px) + 32px) !important;
            }
        }

        @media (max-width: 600px) {
            #backToTopBtn {
                bottom: calc(var(--footer-height, 64px) + 5px) !important;
                right: 10vw !important;
                width: 40px !important;
                height: 40px !important;
                font-size: 1.0em !important;
            }

            #backToTopBtn i {
                font-size: 0.95em !important;
            }
        }

        /* Make the back-to-top button smaller on very small mobile screens */
        @media (max-width: 400px) {
            #backToTopBtn {
                width: 40px !important;
                height: 40px !important;
                font-size: 1.0em !important;
                right: 12vw !important;
                bottom: calc(var(--footer-height, 64px) + 5px) !important;
            }

            #backToTopBtn i {
                font-size: 0.95em !important;
            }
        }

        #shippingModalBody {
            width: 100%;
            text-align: left;
        }

        #closeShippingModal {
            margin-top: 32px;
            background: #1d2731;
            color: #fff;
            font-size: 1.1em;
            padding: 10px 32px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }

        .footer-social-icons {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            margin-top: 5px;
        }

        .footer-social-icons a {
            color: #fff !important;
            text-decoration: none !important;
            font-size: .90em;
            padding: 0 6px;
            transition: color 0.2s;
        }

        .footer-social-icons a i,
        .footer-social-icons a:visited i,
        .footer-social-icons a:active i,
        .footer-social-icons a:focus i {
            color: #fff !important;
        }

        .header-subtitle {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            font-size: 1.1em;
            font-family: 'Bebas Neue', Arial, Helvetica, sans-serif;
            margin-top: 0 !important;
            padding-top: 0 !important;
            letter-spacing: 0.04em;
            text-align: center;
            user-select: none;
        }

        .header-subtitle-main {
            color: #fff;
        }

        .header-subtitle-since {
            color: #D9B310;
            margin-left: 0.5em;
        }

        @media (max-width: 500px) {
            .s-card__title {
                font-size: 1.35em !important;
            }

            /* Restore stacking of card image above content for small/mobile screens */
            .su-card-container.su-card-container--horizontal {
                flex-direction: column !important;
                align-items: stretch !important;
            }

            .su-card-container__media {
                width: 100% !important;
                max-width: 100vw !important;
                min-width: 0 !important;
                padding: 10px 0 0 0 !important;
                margin: 0 auto !important;
                display: flex !important;
                flex-direction: column !important;
                align-items: center !important;
                justify-content: center !important;
            }

            .su-card-img,
            .lazy-img.su-card-img {
                width: 300px !important;
                height: 400px !important;
                max-width: 98vw !important;
                max-height: 400px !important;
                object-fit: contain !important;
                margin: 0 auto !important;
                display: block !important;
            }

            .su-card-container__content {
                padding: 10px 8px 8px 8px !important;
                font-size: 1.08em !important;
                word-break: normal !important;
                white-space: normal !important;
            }

            .su-card-details {
                font-size: 1.18em !important;
            }
        }

        @media (max-width: 800px) {
            .collectables {
                display: none;
            }

            .header-title {
                white-space: nowrap;
            }
        }
    </style>
</head>

<body id="top">

    <div class="custom-header">
        <div class="header-title" style="margin-bottom:0.08em;">
            <span class="header-geek">GEEK</span><span class="header-sports">SPORTS</span><span
                class="header-cards">CARDS <span class="collectables">& COLLECTABLES</span></span>
        </div>
        <div class="header-subtitle" style="margin-top:0;">
            <span class="header-subtitle-main">COLLECTING | BUYING | SELLING | TRADING</span>
            <span class="header-subtitle-since"> SINCE 1985</span>
        </div>
    </div>



    <div class="search-outer-container">
        <div id="customSearchContainer" class="search-input-wrapper">
            <input type="text" id="keywordSearch" placeholder="Search keywords...">
            <i class="fa-solid fa-magnifying-glass search-icon-inside"></i>
            <button type="button" id="clearSearchBtn" title="Clear search">&#10006;</button>
        </div>
    </div>



    <div class="container-main">

        <div style="display: flex;">
            <div id="sidebar">
                <nav class="side-menu" id="sideMenuLinks" style="margin-top:0;">
                    <ul>
                        <li>
                            <hr style="border:0;border-top:1px solid white;margin:0 0 10px 0;">
                        </li>
                        <li class="sidebar-filters-menu">
                            <a href="#"><i class="fa-solid fa-filter"></i> Filters</a>
                            <div class="sidebar-filters-panel">
                                <form id="filterForm">
                                    <div class="sidebar-section-title">Format</div>
                                    <div><input type="checkbox" name="filter" value="auction" id="filter_auction">
                                        <label for="filter_auction">Auction</label>
                                    </div>
                                    <div><input type="checkbox" name="filter" value="bin" id="filter_bin"> <label
                                            for="filter_bin">Buy It Now</label></div>
                                    <div class="sidebar-section-title">Category</div>
                                    <div><input type="checkbox" name="category_filter" value="Singles"
                                            id="filter_category_singles"> <label
                                            for="filter_category_singles">Singles</label></div>
                                    <div><input type="checkbox" name="category_filter" value="Lots"
                                            id="filter_category_lots"> <label for="filter_category_lots">Lots</label>
                                    </div>
                                    <div><input type="checkbox" name="category_filter" value="Sets"
                                            id="filter_category_sets"> <label for="filter_category_sets">Sets</label>
                                    </div>

                                    <div><input type="checkbox" name="filter" value="graded" id="filter_graded"> <label
                                            for="filter_graded">Graded</label></div>
                                    <div><input type="checkbox" name="filter" value="autographed"
                                            id="filter_autographed"> <label for="filter_autographed">Autographed</label>
                                    </div>


                                    <div class="sidebar-section-title">Sport</div>
                                    <div><input type="checkbox" name="sport_filter" value="Baseball"
                                            id="filter_sport_baseball"> <label
                                            for="filter_sport_baseball">Baseball</label></div>
                                    <div><input type="checkbox" name="sport_filter" value="Basketball"
                                            id="filter_sport_basketball"> <label
                                            for="filter_sport_basketball">Basketball</label></div>
                                    <div><input type="checkbox" name="sport_filter" value="Football"
                                            id="filter_sport_football"> <label
                                            for="filter_sport_football">Football</label></div>
                                    <div><input type="checkbox" name="sport_filter" value="Hockey"
                                            id="filter_sport_hockey"> <label for="filter_sport_hockey">Hockey</label>
                                    </div>
                                    <div class="sidebar-section-title">Feature / Attribute</div>
                                    <div><input type="checkbox" name="filter" value="rookie" id="filter_rookie"> <label
                                            for="filter_rookie">Rookie Card</label></div>
                                    <div><input type="checkbox" name="filter" value="hof" id="filter_hof"> <label
                                            for="filter_hof">Hall of Fame</label></div>
                                    <div><input type="checkbox" name="filter" value="uer" id="filter_uer"> <label
                                            for="filter_uer">Uncorrected Errors</label></div>
                                    <div><input type="checkbox" name="filter" value="err" id="filter_err"> <label
                                            for="filter_err">Errors</label></div>
                                    <div><input type="checkbox" name="filter" value="cor" id="filter_cor"> <label
                                            for="filter_cor">Corrected</label></div>
                                    <div class="sidebar-section-title">View</div>
                                    <div><input type="radio" name="view_filter" value="most_bids"
                                            id="filter_view_most_bids"> <label for="filter_view_most_bids">Most
                                            Bids</label></div>
                                    <div><input type="radio" name="view_filter" value="most_watchers"
                                            id="filter_view_most_watchers"> <label for="filter_view_most_watchers">Most
                                            Watchers</label></div>
                                    <div><input type="radio" name="view_filter" value="ending_today"
                                            id="filter_view_ending_today"> <label for="filter_view_ending_today">Auction
                                            Ending Today</label></div>
                                    <div><input type="radio" name="view_filter" value="ending_soonest"
                                            id="filter_view_ending_soonest"> <label
                                            for="filter_view_ending_soonest">Ending Soonest</label></div>
                                    <div><input type="radio" name="view_filter" value="most_recent"
                                            id="filter_view_most_recent"> <label for="filter_view_most_recent">Most
                                            Recent</label></div>
                                    <div><input type="radio" name="view_filter" value="highest_price"
                                            id="filter_view_highest_price"> <label
                                            for="filter_view_highest_price">Highest Price</label></div>
                                    <div><input type="radio" name="view_filter" value="lowest_price"
                                            id="filter_view_lowest_price"> <label for="filter_view_lowest_price">Lowest
                                            Price</label></div>
                                    <div class="sidebar-clear-btn"><button type="button" id="clearAllFilters">Clear
                                            Filters</button></div>
                                </form>
                            </div>
                        </li>

                        <li>
                            <hr style="border:0;border-top:1px solid white;margin:0 0 10px 0;">
                        </li>
                    </ul>

                    <div style="text-align:left; margin-top:6px; padding-left:8px;">
                        <h3 style="margin:0 0 8px 0;font-size:1.20em;font-weight:bold;line-height:1.1;">on <span
                                style="color:#e53238;">e</span><span style="color:#0064d2;">B</span><span
                                style="color:#f5af02;">a</span><span style="color:#86b817;">y</span>
                        </h3>
                    </div>

                    <div style="text-align:center; margin-top:10px;">
                        <a href="https://www.ebay.com/sch/i.html?rt=nc&_ssn=lotsofcards-gsc&_dmd=2&mkcid=1&mkrid=711-53200-19255-0&siteid=0&campid=5339025312&customid=&toolid=10001"
                            target="_blank" rel="noopener">
                            <img src="images/gsc-logo.png" alt="Geeksports Cards on Ebay"
                                style="max-width:100%;width:220px;height:auto;">
                        </a>
                    </div>

                    <div style="text-align:center; margin-top:10px;">
                        <a href="https://www.ebay.com/sch/i.html?rt=nc&_ssn=lotsofcards-gsc&_dmd=2&mkcid=1&mkrid=711-53200-19255-0&siteid=0&campid=5339025312&customid=&toolid=10001&LH_BIN=1"
                            target="_blank" rel="noopener">
                            <img src="images/gsc-bin.png" alt="Geeksports Cards on Ebay"
                                style="max-width:100%;width:220px;height:auto;">
                        </a>
                    </div>

                    <div style="text-align:center; margin-top:10px;">
                        <a href="https://www.ebay.com/sch/i.html?rt=nc&_ssn=lotsofcards-gsc&_dmd=2&mkcid=1&mkrid=711-53200-19255-0&siteid=0&campid=5339025312&customid=&toolid=10001&LH_Auction=1"
                            target="_blank" rel="noopener">
                            <img src="images/GSC-AUCTIONS.png" alt="Geeksports Cards Auctions on Ebay"
                                style="max-width:100%;width:220px;height:auto;">
                        </a>
                    </div>
                    <div style="text-align:center; margin-top:10px;">
                        <a href="#">
                            <img src="images/GSC-SLABS.png" alt="Geeksports Slabs Auctions on Ebay"
                                style="max-width:100%;width:220px;height:auto;">
                        </a>
                    </div>
                    <div style="text-align:center; margin-top:10px;">
                        <a href="#" target="_blank" rel="noopener">
                            <img src="images/gsc-collectables.png" alt="Geeksports Cards on Ebay"
                                style="max-width:100%;width:220px;height:auto;">
                        </a>
                    </div>
                    <hr style="border:0;border-top:1px solid #eee;margin:8px 0;">

                    <div style="text-align:left; margin-top:6px; padding-left:8px;">
                        <h3 style="margin:0 0 8px 0;font-size:1.20em;font-weight:bold;line-height:1.1;">Social Media
                        </h3>
                    </div>
                    <div style="text-align:center; margin-top:10px;">
                        <a href="https://www.facebook.com/geeksportscards" target="_blank" rel="noopener">
                            <img src="images/facebook_logo.png" alt="Geeksports Cards on facebook"
                                style="max-width:100%;width:220px;height:auto;">
                        </a>
                    </div>

                    <div style="text-align:center; margin-top:10px;">
                        <a href="https://www.instagram.com/geek_sports_cards/" target="_blank" rel="noopener">
                            <img src="images/instagram_logo.png" alt="Geeksports Cards on facebook"
                                style="max-width:100%;width:220px;height:auto;">
                        </a>
                    </div>

                    <hr style="border:0;border-top:1px solid #eee;margin:8px 0;">

                </nav>

            </div>
            <div class="main-content-flex">
                <div>
                    <div id="resultsCount"></div>
                </div>
                <div id="itemsGrid"></div>
            </div>
        </div>



    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <script>

        // Show about info in main content, full width, when About link is clicked
        $(document).on('click', '.custom-footer a:contains("About")', function (e) {
            e.preventDefault();
            if (window.location.pathname !== '/about') {
                window.history.pushState({ page: 'about' }, '', '/about');
            }
            // Add cache-busting parameter to force fresh data
            const timestamp = new Date().getTime();
            $.getJSON(`static/site.json?_=${timestamp}`, function (siteData) {
                if (siteData && siteData.about) {
                    const a = siteData.about;
                    let html = `<div class='shipping-info-box'>`;
                    html += `<a href="#" id="aboutBackLink" style="display:inline-flex;align-items:center;font-size:1.35em;color:#0d6efd;text-decoration:none;margin-bottom:18px;padding-left:5px;"><i class='fas fa-arrow-circle-left' style='margin-right:10px;font-size:1.4em;'></i><span style='font-weight:bold;font-size:1.1em;'>Back</span></a>`;
                    html += `<h2 class='shipping-info-title'>About</h2>`;
                    html += `<div class='shipping-info-section' style='display:flex;align-items:flex-start;gap:16px;padding-left:5px;'>`;
                    html += `<div style='display:flex;flex-direction:column;align-items:center;justify-content:flex-start;min-width:90px;max-width:90px;'>`;
                    if (a.sellericon) {
                        html += `<img src='${a.sellericon}' alt='Seller Icon' style='max-width:90px;max-height:90px;display:block;'>`;
                    }
                    html += `</div>`;
                    html += `<div style='flex:1;display:flex;flex-direction:column;justify-content:flex-start;'>`;
                    html += `<div>${a.description || ''}</div>`;
                    if (a.ebayrating) {
                        html += `<div style='margin-top:6px;'>${a.ebayrating}</div>`;
                    }
                    html += `</div></div>`;

                    if (a.ssnicon || a.rating || a.ebayfeedbackurl) html += `
                        <div class='shipping-info-section' style='margin-bottom:10px;'>
                            <div style='font-size:1.5em;font-weight:bold;margin-bottom:8px;text-align:left;'>on 
                                <span style="color:#e53238;">e</span><span style="color:#0064d2;">B</span><span style="color:#f5af02;">a</span><span style="color:#86b817;">y</span>
                            </div>
                            <div style='display:flex;flex-direction:column;align-items:flex-start;gap:10px;'>
                                <div style='display:flex;flex-direction:row;align-items:center;justify-content:flex-start;min-width:360px;max-width:360px;margin-left:-4px;gap:5px;'>
                                    <img src='images/GEEKSPORTSCARDS_BIN.png' alt='BIN Icon' style='max-width:90px;max-height:90px;display:block;'>
                                    <img src='images/GEEKSPORTSCARDS_AUCTIONS.png' alt='Auctions Icon' style='max-width:90px;max-height:90px;display:block;'>
                                    <img src='images/GEEKSPORTSCARDS_SLABS.png' alt='Slabs Icon' style='max-width:90px;max-height:90px;display:block;'>
                                    <img src='images/GEEKSPORTSCARDS_COLLECTABLES.png' alt='Collectables Icon' style='max-width:90px;max-height:90px;display:block;'>
                                </div>
                                <div style='display:flex;flex-direction:column;align-items:flex-start;justify-content:center;text-align:left;'>
                                    <span style='font-size:1.08em;font-weight:bold;margin-bottom:2px;'>GEEK SPORTS CARDS &amp; COLLECTABLES</span>
                                    <span style='font-size:0.98em;margin-bottom:4px;'>100% Positive Seller Feedback (last 12 months)</span>
                                    <a href='https://www.ebay.com/fdbk/feedback_profile/lotsofcards-gsc' target='_blank' rel='noopener' style='color:#0d6efd;text-decoration:underline;font-weight:bold;display:inline-block;'>eBay Seller Feedback</a>
                                </div>
                            </div>
                        </div>`;
                    html += `</div>`;
                    $('#itemsGrid').html(html);
                    $('#resultsCount').html('');
                    $('.search-outer-container').hide();
                } else {
                    $('#itemsGrid').html('<div class="shipping-info-box">About information not available.</div>');
                    $('#resultsCount').html('');
                    $('.search-outer-container').show();
                }
            }).fail(function () {
                $('#itemsGrid').html('<div class="shipping-info-box">About information could not be loaded.</div>');
                $('#resultsCount').html('');
                $('.search-outer-container').show();
            });
        });

        // Show shipping info in main content, full width, when Shipping link is clicked
        $(document).on('click', '.custom-footer a:contains("Shipping")', function (e) {
            e.preventDefault();
            if (window.location.pathname !== '/shipping') {
                window.history.pushState({ page: 'shipping' }, '', '/shipping');
            }
            // Add cache-busting parameter to force fresh data
            const timestamp = new Date().getTime();
            $.getJSON(`static/site.json?_=${timestamp}`, function (siteData) {
                if (siteData && siteData.shipping) {
                    const s = siteData.shipping;
                    let html = `<div class='shipping-info-box'>`;
                    html += `<a href="#" id="shippingBackLink" style="display:inline-flex;align-items:center;font-size:1.25em;color:#0d6efd;text-decoration:none;margin-bottom:18px;padding-left:5px;"><i class='fas fa-arrow-circle-left' style='margin-right:10px;font-size:1.4em;'></i><span style='font-weight:bold;font-size:1.1em;'>Back</span></a>`;
                    html += `<h2 class='shipping-info-title'>Shipping Policy</h2>`;
                    html += `<div class='shipping-info-section'>${s.description || ''}</div>`;
                    if (s.policy) html += `<div class='shipping-info-section'>${s.policy}</div>`;

                    if (s.freeshipping) html += `<div class='shipping-info-section'><strong>Free Shipping:</strong> ${s.freeshipping}</div>`;

                    if (s.standardshipping) html += `<div class='shipping-info-section'><strong>Standard Shipping Raw / Singles:</strong> ${s.standardshipping}</div>`;

                    if (s.combinedshipping) html += `<div class='shipping-info-section'><strong>Combined Shipping Raw / Singles:</strong> ${s.combinedshipping}</div>`;

                    if (s.standardshippingslabs) html += `<div class='shipping-info-section'><strong>Standard Shipping Slabs:</strong> ${s.standardshippingslabs}</div>`;

                    if (s.lotsnsetsshipping) html += `<div class='shipping-info-section'><strong>Lots and Sets 20 Items or Less Standard Shipping:</strong> ${s.lotsnsetsshipping}</div>`;

                    if (s.lotsnsetsshipping20plus) html += `<div class='shipping-info-section'><strong>Lots and Sets More 20 Items Standard Shipping:</strong> ${s.lotsnsetsshipping20plus}</div>`;



                    if (s.shippingMethod) html += `<div class='shipping-info-section'><strong>Shipping Method:</strong> ${s.shippingMethod}</div>`;
                    if (s.ebayshippinglink) html += `<div class='shipping-info-section'><a href='${s.ebayshippinglink}' target='_blank' rel='noopener'>eBay Shipping Help</a></div>`;
                    html += `</div>`;
                    $('#itemsGrid').html(html);
                    $('#resultsCount').html('');
                    $('.search-outer-container').hide();
                } else {
                    $('#itemsGrid').html('<div class="shipping-info-box">Shipping information not available.</div>');
                    $('#resultsCount').html('');
                    $('.search-outer-container').show();
                }
            }).fail(function () {
                $('#itemsGrid').html('<div class="shipping-info-box">Shipping information could not be loaded.</div>');
                $('#resultsCount').html('');
                $('.search-outer-container').show();
            });
        });

        // Refresh the screen when the back link is clicked
        $(document).on('click', '#shippingBackLink', function (e) {
            e.preventDefault();
            // Restore the main content and update URL
            if (window.location.pathname !== '/') {
                window.history.pushState({}, '', '/');
            }
            if (window._ebayData) {
                renderList(window._ebayData);
                updateResultsCount(window._ebayData.length);
                $('.search-outer-container').show();
            } else {
                window.location.reload();
            }
        });
        $(document).on('click', '#aboutBackLink', function (e) {
            e.preventDefault();
            // Restore the main content and update URL
            if (window.location.pathname !== '/') {
                window.history.pushState({}, '', '/');
            }
            if (window._ebayData) {
                renderList(window._ebayData);
                updateResultsCount(window._ebayData.length);
                $('.search-outer-container').show();
            } else {
                window.location.reload();
            }
            // Handle browser navigation for /about and /shipping
            window.addEventListener('popstate', function (event) {
                if (window.location.pathname === '/about') {
                    // Only load About if not already showing
                    if (!$('#itemsGrid .shipping-info-title').text().includes('About')) {
                        $('.custom-footer a:contains("About")').trigger('click');
                    }
                } else if (window.location.pathname === '/shipping') {
                    if (!$('#itemsGrid .shipping-info-title').text().includes('Shipping')) {
                        $('.custom-footer a:contains("Shipping")').trigger('click');
                    }
                } else {
                    // Restore main content if not /about or /shipping
                    if (window._ebayData) {
                        renderList(window._ebayData);
                        updateResultsCount(window._ebayData.length);
                        $('.search-outer-container').show();
                    } else {
                        window.location.reload();
                    }
                }
            });
        });




        function updateResultsCount(count) {
            let total = window._ebayData ? window._ebayData.length : count;
            $('#resultsCount').html('<span class="results-count-text">' + count + ' of ' + total + ' matching items</span>');
        }
        function getAuctionTimeLeft(endDateStr) {
            if (!endDateStr) return '';
            let endDate = new Date(endDateStr);
            if (isNaN(endDate.getTime())) return '';
            let now = new Date();
            let diffMs = endDate - now;
            if (diffMs <= 0) return 'Ended';
            let diffSec = Math.floor(diffMs / 1000);
            let hours = Math.floor(diffSec / 3600);
            let minutes = Math.floor((diffSec % 3600) / 60);
            let days = Math.floor(hours / 24);
            let remHours = hours % 24;
            let timeLeftStr = '';
            if (days >= 1) {
                let pad = n => n.toString().padStart(2, '0');
                timeLeftStr = `${pad(days)}:${pad(remHours)}:${pad(minutes)}`;
            } else {
                timeLeftStr = `${hours}h ${minutes}m`;
            }
            let endStr = '';
            let endDay = endDate.getDate(), nowDay = now.getDate();
            if (endDate.toDateString() === now.toDateString()) {
                endStr = endDate.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            } else {
                let tomorrow = new Date(now);
                tomorrow.setDate(now.getDate() + 1);
                if (endDate.toDateString() === tomorrow.toDateString()) {
                    endStr = 'Tomorrow ' + endDate.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                } else {
                    endStr = endDate.toLocaleDateString() + ' ' + endDate.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                }
            }
            return `${timeLeftStr} (${endStr})`;
        }
        function renderList(items) {
            $('.search-outer-container').show();
            let html = '<ul class="items-list">';
            items.forEach(row => {
                const imgUrl = row['ebay Image URL 1'] && (row['ebay Image URL 1'].startsWith('http://') || row['ebay Image URL 1'].startsWith('https://'))
                    ? row['ebay Image URL 1']
                    : 'https://d3mop092koehdk.cloudfront.net/images/no-image-new.jpg';
                const isSetsCategory = row['Category'] && String(row['Category']).trim().toLowerCase() === 'sets';
                const isSetOrLot = row['Category'] && (String(row['Category']).trim().toLowerCase() === 'sets' || String(row['Category']).trim().toLowerCase() === 'lots');
                let title;
                if (row['CategoryID'] == '261329' || row['CategoryID'] == '261330') {
                    title = `${row['Year'] || ''} ${row['Brand'] || ''}`.trim();
                } else {
                    title = isSetOrLot ? (row['Brand'] || '') : (row['Card Name'] || '');
                }
                let link = row['ebay listing URL'] || '#';
                const affiliateParams = 'mkcid=1&mkrid=711-53200-19255-0&siteid=0&campid=5339025312&customid=&toolid=10001&mkevt=1';
                if (link.includes('ebay.com')) {
                    link += (link.includes('?') ? '&' : '?') + affiliateParams;
                }
                const price = row['Current Price'] ? `$${row['Current Price']}` : '';
                const bids = row['Bid Count'] ? (parseInt(row['Bid Count']) === 0 ? row['Bid Count'] : `${row['Bid Count']} bid${row['Bid Count'] == 1 ? '' : 's'}`) : '';
                let shipping = '';
                if (row['Shipping Cost'] !== undefined && row['Shipping Cost'] !== null && row['Shipping Cost'] !== '') {
                    const shipVal = parseFloat(row['Shipping Cost']);
                    if (!isNaN(shipVal) && shipVal === 0) {
                        shipping = '<span style="color:green;font-weight:bold;">+ Free Shipping</span>';
                    } else {
                        shipping = `+$${row['Shipping Cost']} Shipping`;
                    }
                }
                const timeLeft = getAuctionTimeLeft(row['End Date']);
                let timeLeftColor = '';
                if (row['End Date']) {
                    let endDate = new Date(row['End Date']);
                    if (!isNaN(endDate.getTime())) {
                        let now = new Date();
                        let diffMs = endDate - now;
                        if (diffMs > 24 * 60 * 60 * 1000) {
                            timeLeftColor = 'green';
                        } else if (diffMs > 0) {
                            timeLeftColor = 'red';
                        }
                    }
                }
                const itemNum = row['ItemID'] || '';
                const formatLower = row['Format'] ? String(row['Format']).trim().toLowerCase() : '';
                const watchers = (formatLower === 'auction' && row['Watch Count'] && parseInt(row['Watch Count']) >= 1) ? `${row['Watch Count']}` : '';
                // Render action button when an eBay listing URL exists.
                // Button text depends on the selling format:
                //  - Auction -> "Place Bid Now"
                //  - BIN / Buy It Now -> "Buy It Now"
                let actionButtonHtml = '';
                const btnLinkRaw = row['ebay listing URL'] || '';
                if (btnLinkRaw) {
                    let btnLink = btnLinkRaw;
                    if (btnLink.includes('ebay.com')) {
                        btnLink += (btnLink.includes('?') ? '&' : '?') + affiliateParams;
                    }
                    const formatLowerInner = row['Format'] ? String(row['Format']).trim().toLowerCase() : '';
                    let buttonText = 'Buy It Now';
                    if (formatLowerInner === 'auction' || formatLowerInner.includes('auction')) {
                        buttonText = 'Place Bid Now';
                    } else if (formatLowerInner === 'bin' || formatLowerInner.includes('buy')) {
                        buttonText = 'Buy It Now';
                    }
                    actionButtonHtml = `<a href="${btnLink}" target="_blank" rel="noopener" style='background:#0d6efd;color:#fff;border:none;border-radius:4px;padding:8px 22px;font-size:1em;font-weight:bold;cursor:pointer;text-decoration:none;display:inline-block;'>${buttonText}</a>`;
                }
                html += `
<li class="s-card s-card--horizontal">
  <div class="su-card-container su-card-container--horizontal">
    <div class="su-card-container__media">
      <div class="su-card-external-link">
        <a href="${link}" target="_blank" title="View On eBay">
          <i class="fas fa-external-link"></i>
        </a>
      </div>
            <a href="${link}" target="_blank">
                <img class="lazy-img su-card-img" loading="lazy" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==" data-src="${imgUrl}" alt="${title}">
            </a>
      <div class="su-card-seller-info">
        ${itemNum ? `Item ID: ${itemNum}` : ''}
        ${row['Seller'] ? `<div class='su-card-seller'>Seller: ${row['Seller']}</div>` : ''}
      </div>
    </div>
    <div class="su-card-container__content">
      <div>
        <a href="${link}" target="_blank" class="su-card-title-link">
          <div class="s-card__title">${title}</div>
        </a>
        <div class="su-card-details">
          ${row['Player/Athlete'] && row['Player/Athlete'].trim() !== '' ? `<span class="su-card-label">Player:</span> ${row['Player/Athlete']}<br>` : ''}
          ${row['Team'] && row['Team'].trim() !== '' ? `<span class="su-card-label">Team:</span> ${row['Team']}<br>` : ''}
          ${row['Attributes'] && row['Attributes'].trim() !== '' ? `<span class="su-card-label">Attributes:</span> ${row['Attributes']}<br>` : ''}
          <div class="su-card-spacer"></div>
          <span class="su-card-label">Sport:</span> ${row['Sport'] || ''}<br>
          ${!isSetsCategory ? `<span class="su-card-label">Set:</span> ${row['Set Name'] || ''}<br>` : ''}
          ${row['Manufacturer'] ? `<span class="su-card-label">Manufacturer:</span> ${row['Manufacturer']}<br>` : ''}
          ${row['Brand'] && !isSetOrLot ? `<span class="su-card-label">Brand:</span> ${row['Brand']}<br>` : ''}
          ${row['Features'] && row['Features'].trim() !== '' ? `<span class="su-card-label">Features:</span> ${row['Features']}<br>` : ''}
          <!-- Features removed as requested -->
          ${row['Additional Information']
                        ? `<span class="su-card-label">Additional Information:</span> ${row['Additional Information']}<br><div class='su-card-spacer'></div>`
                        : `<div class='su-card-spacer'></div>`}
          ${(() => {
                        let formatHtml = '';
                        // Determine quantity label and value
                        let quantityLabel = 'Quantity Available:';
                        let quantityValue = '';
                        if (row['Variation'] == 0) {
                            quantityValue = '1';
                        } else if (row['Quantity Available'] !== undefined && row['Quantity Available'] !== null && String(row['Quantity Available']).trim() !== '') {
                            quantityValue = String(row['Quantity Available']);
                        } else {
                            // default to 1 when no explicit quantity is provided
                            quantityValue = '1';
                        }
                        // Check CategoryID for specific categories
                        if (row['CategoryID'] == '261329' || row['CategoryID'] == '261330') {
                            quantityLabel = 'Number of Cards:';
                            if (row['Number of Cards'] !== undefined && row['Number of Cards'] !== null && String(row['Number of Cards']).trim() !== '') {
                                quantityValue = String(row['Number of Cards']);
                            } else {
                                quantityValue = null; // do not show if not present
                            }
                        }

                        if (row['Variation'] == 1) {
                            // Show mapped Category (singular form) directly above Quantity Available
                            const rawCat = row['Category'] ? String(row['Category']).trim().toLowerCase() : '';
                            let catDisplay = '';
                            if (rawCat === 'sets') catDisplay = 'Set';
                            else if (rawCat === 'singles') catDisplay = 'Single';
                            else if (rawCat === 'lots') catDisplay = 'Lot';
                            else if (row['Category']) catDisplay = row['Category'];
                            if (catDisplay) {
                                // Show only the mapped category term (no 'Category:' label) and not bold
                                formatHtml += `<span class="su-card-category">${catDisplay}</span><br>`;
                            }
                        } else {
                            const rawCat = row['Category'] ? String(row['Category']).trim().toLowerCase() : '';
                            let catDisplay = '';
                            if (rawCat === 'sets') catDisplay = 'Set';
                            else if (rawCat === 'singles') catDisplay = 'Single';
                            else if (rawCat === 'lots') catDisplay = 'Lot';
                            else if (row['Category']) catDisplay = row['Category'];
                            formatHtml += `<span class="su-card-label"></span> ${catDisplay}<br>`;
                        }

                        // Show quantity only if value is present
                        if (quantityValue !== null) {
                            formatHtml += `<span class="su-card-label">${quantityLabel}</span> ${quantityValue}<br>`;
                        }
                        if (row['Format'] && row['Format'].toLowerCase() === 'bin') {
                            formatHtml += `<span class="su-card-label">Selling Format:</span> Buy It Now`;
                        } else if (row['Format'] && row['Format'].toLowerCase() === 'auction') {
                            formatHtml += `<span class="su-card-label">Selling Format:</span> Auction`;
                        } else if (row['Format']) {
                            formatHtml += `<span class=\"su-card-label\">Selling Format:</span> ` + row['Format'];
                        }
                        formatHtml += '<br>';
                        // Add eBay Store: SSN below the format line
                        if (row['SSN']) {
                            // Build a safe eBay store search URL using the SSN value from the data.
                            // Normalize for URL: trim, lower-case, replace spaces with '' or '+' as needed,
                            // but preserve the original value for display.
                            const ssnRaw = String(row['SSN']).trim();
                            // For the _ssn param eBay expects a seller store id; remove spaces and make lowercase.
                            const ssnForUrl = encodeURIComponent(ssnRaw.replace(/\s+/g, ''));
                            const ssnDisplay = ssnRaw; // keep original for display
                            const ssnUrl = `https://www.ebay.com/sch/i.html?rt=nc&_ssn=lotsofcards-gsc&_dmd=2&mkcid=1&mkrid=711-53200-19255-0&siteid=0&campid=5339025312&customid=&toolid=10001&mkevt=1`;
                            formatHtml += `<div class='su-card-seller'><span style='font-weight:bold;'>eBay Store:</span> <a href='${ssnUrl}' target='_blank' rel='noopener'>${ssnDisplay}</a></div>`;
                        }
                        return formatHtml;
                    })()}
        </div>
      </div>
      <div class="su-card-container__attributes su-card-container__attributes--has-secondary">
        <div class="su-card-container__attributes__primary">
          <div class="s-card__attribute-row">
            <span class="su-card-price">${price}</span>
            <span class="su-card-shipping">${shipping}</span>
          </div>
          <div class="s-card__attribute-row su-card-bids-time">
            ${(formatLower !== 'bin' && !formatLower.includes('buy')) ? `<div><strong>Bid Count:</strong> <span style="color: ${parseInt(bids) == 0 ? 'red' : 'black'}; ${parseInt(bids) == 0 ? 'font-weight: bold;' : ''}">${parseInt(bids)}</span></div>` : ''}
            ${watchers ? `<div><strong>Watchers:</strong> ${watchers}</div>` : ''}
            ${(formatLower !== 'bin' && !formatLower.includes('buy')) ? `<div><strong>Time Left:</strong> <span${timeLeftColor ? ` style="color: ${timeLeftColor};"` : ''}>${timeLeft}</span></div>` : ''}
          </div>
        </div>
      </div>
      ${actionButtonHtml ? `<div class='su-card-action-btn'>${actionButtonHtml}</div>` : ''}
    </div>
  </div>
</li>
                `;

            });
            html += '</ul>';
            $('#itemsGrid').html(html);
        }
        function filterData(data) {
            const selected = $('#filterForm input[type=checkbox][name=filter]:checked').map(function () { return this.value; }).get();
            const selectedCategories = $('#filterForm input[type=checkbox][name=category_filter]:checked').map(function () { return this.value; }).get();
            const selectedSports = $('#filterForm input[type=checkbox][name=sport_filter]:checked').map(function () { return this.value; }).get();
            const keyword = $('#keywordSearch').val().trim().toLowerCase();
            if (!selected.length && !selectedCategories.length && !selectedSports.length && !keyword) return data;
            return data.filter(row => {
                if (keyword) {
                    let found = false;
                    const fields = ['Title', 'Player/Athlete', 'Team', 'Card Name', 'Features', 'Attributes', 'Category', 'Sport', 'Current Price', 'ItemID', 'Format'];
                    for (let f of fields) {
                        if (row[f] && String(row[f]).toLowerCase().includes(keyword)) { found = true; break; }
                    }
                    if (!found) return false;
                }
                for (let filter of selected) {
                    if (filter === 'rookie') {
                        if (!((row['Features'] && row['Features'].toLowerCase().includes('rookie')) || (row['Card Name'] && row['Card Name'].toLowerCase().includes('rookie')))) return false;
                    } else if (filter === 'hof') {
                        if (!(row['Attributes'] && row['Attributes'].toLowerCase().includes('hall of fame'))) return false;
                    } else if (filter === 'uer') {
                        if (!(row['Card Name'] && row['Card Name'].trim().endsWith('UER'))) return false;
                    } else if (filter === 'err') {
                        if (!(row['Card Name'] && row['Card Name'].trim().endsWith('ERR'))) return false;
                    } else if (filter === 'cor') {
                        if (!(row['Card Name'] && row['Card Name'].trim().endsWith('COR'))) return false;
                    } else if (filter === 'graded') {
                        if (!(row['Graded'] && row['Graded'].toLowerCase() === 'yes')) return false;
                    } else if (filter === 'autographed') {
                        if (!(row['Autographed'] && row['Autographed'].toLowerCase() === 'yes')) return false;
                    } else if (filter === 'auction') {
                        if (!(row['Format'] && row['Format'].toLowerCase() === 'auction')) return false;
                    } else if (filter === 'bin') {
                        if (!(row['Format'] && (row['Format'].toLowerCase() === 'bin' || row['Format'].toLowerCase() === 'fixedprice'))) return false;
                    }
                }
                if (selectedCategories.length) {
                    let cat = (row['Category'] || '').trim().toLowerCase();
                    let found = false;
                    for (let catVal of selectedCategories) {
                        let val = catVal.trim().toLowerCase();
                        if (cat.includes(val)) { found = true; break; }
                    }
                    if (!found) return false;
                }
                if (selectedSports.length) {
                    let sport = (row['Sport'] || '').toLowerCase();
                    let found = false;
                    for (let sportVal of selectedSports) {
                        let val = sportVal.toLowerCase();
                        if (sport === val) { found = true; break; }
                    }
                    if (!found) return false;
                }
                return true;
            });
        }

        // Function to shuffle array in place (Fisher-Yates shuffle)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        $.getJSON('data/ebay_active_items.json', function (data) {
            // Randomize the order of cards
            shuffleArray(data);

            window._ebayData = data;
            if (!data.length) {
                $('#itemsGrid').html('<div>No data found.</div>');
                updateResultsCount(0);
                return;
            }
            $('#listViewBtn').addClass('active');
            $('#gridViewBtn').remove();
            renderList(data);
            updateResultsCount(data.length);
            function updateFilters() {
                let filtered = filterData(data);
                const selectedViews = $('#filterForm input[type=radio][name=view_filter]:checked').map(function () { return this.value; }).get();
                if (selectedViews.length > 0) {
                    const sortBy = selectedViews[0]; // take the first one
                    if (sortBy === 'most_bids') {
                        filtered = filtered.filter(item => {
                            const bids = parseInt(item['Bid Count'] || 0);
                            return bids > 0;
                        });
                    } else if (sortBy === 'most_watchers') {
                        filtered = filtered.filter(item => {
                            const watchers = parseInt(item['Watch Count'] || 0);
                            return watchers >= 1;
                        });
                    } else if (sortBy === 'ending_today') {
                        const today = new Date();
                        const todayStr = today.toDateString();
                        filtered = filtered.filter(item => {
                            const endDate = new Date(item['End Date']);
                            return endDate.toDateString() === todayStr;
                        });
                    }
                    filtered.sort((a, b) => {
                        if (sortBy === 'most_bids') {
                            const aBids = parseInt(a['Bid Count'] || 0);
                            const bBids = parseInt(b['Bid Count'] || 0);
                            return bBids - aBids;
                        } else if (sortBy === 'ending_soonest') {
                            const aDate = new Date(a['End Date']);
                            const bDate = new Date(b['End Date']);
                            return aDate - bDate;
                        } else if (sortBy === 'most_recent') {
                            // Assuming higher ItemID is more recent
                            const aId = parseInt(a['ItemID'] || 0);
                            const bId = parseInt(b['ItemID'] || 0);
                            return bId - aId;
                        } else if (sortBy === 'highest_price') {
                            const aPrice = parseFloat(a['Current Price'] || 0);
                            const bPrice = parseFloat(b['Current Price'] || 0);
                            return bPrice - aPrice;
                        } else if (sortBy === 'lowest_price') {
                            const aPrice = parseFloat(a['Current Price'] || 0);
                            const bPrice = parseFloat(b['Current Price'] || 0);
                            return aPrice - bPrice;
                        } else if (sortBy === 'most_watchers') {
                            const aWatchers = parseInt(a['Watch Count'] || 0);
                            const bWatchers = parseInt(b['Watch Count'] || 0);
                            return bWatchers - aWatchers;
                        } else if (sortBy === 'ending_today') {
                            const aDate = new Date(a['End Date']);
                            const bDate = new Date(b['End Date']);
                            return aDate - bDate;
                        }
                        return 0;
                    });
                }
                updateResultsCount(filtered.length);
                renderList(filtered);
            }
            $('#filterForm input[type=checkbox][name=filter]').on('change', updateFilters);
            $('#filterForm input[type=checkbox][name=category_filter]').on('change', updateFilters);
            $('#filterForm input[type=checkbox][name=sport_filter]').on('change', updateFilters);
            $('#filterForm input[type=radio][name=view_filter]').on('change', updateFilters);
            function updateClearBtn() {
                const val = $('#keywordSearch').val();
                if (val) {
                    $('#clearSearchBtn').show();
                } else {
                    $('#clearSearchBtn').hide();
                }
            }
            $('#keywordSearch').on('input', function () {
                updateFilters();
                updateClearBtn();
            });
            $('#clearSearchBtn').on('click', function () {
                $('#keywordSearch').val('');
                updateFilters();
                updateClearBtn();
                $('#keywordSearch').focus();
            });
            updateClearBtn();
            $('#clearAllFilters').on('click', function () {
                $('#filterForm input[type=checkbox][name=filter]').prop('checked', false);
                $('#filterForm input[type=checkbox][name=category_filter]').prop('checked', false);
                $('#filterForm input[type=checkbox][name=sport_filter]').prop('checked', false);
                $('#filterForm input[type=radio][name=view_filter]').prop('checked', false);
                $('#keywordSearch').val('');
                updateClearBtn();
                updateResultsCount(data.length);
                renderList(data);
            });
        });

        // Improved lazy loading for images: always observe after DOM update
        (function () {
            let observer;
            function createObserver() {
                if (observer) observer.disconnect();
                observer = new window.IntersectionObserver((entries, obs) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            if (img.dataset.src && img.src !== img.dataset.src) {
                                img.src = img.dataset.src;
                            }
                            obs.unobserve(img);
                        }
                    });
                }, { rootMargin: '350px' }); // Increased for earlier loading
            }
            function observeImages() {
                if (!observer) createObserver();
                document.querySelectorAll('img.lazy-img').forEach(img => {
                    if (img.dataset.src && img.src !== img.dataset.src) {
                        observer.observe(img);
                    }
                });
            }
            // Patch renderList to always observe images after DOM update
            const origRenderList = renderList;
            renderList = function (items) {
                origRenderList(items);
                setTimeout(observeImages, 0); // Ensure DOM is updated
            };
            document.addEventListener('DOMContentLoaded', function () {
                createObserver();
                observeImages();
            });
        })();
    </script>
    <div class="custom-footer">

        <div style="display:flex;justify-content:center;align-items:center;gap:0;flex-wrap:wrap;margin-bottom:6px;">
            <a href="https://www.ebay.com/sch/i.html?rt=nc&_ssn=lotsofcards-gsc&_dmd=2&mkcid=1&mkrid=711-53200-19255-0&siteid=0&campid=5339025312&customid=&toolid=10001"
                target=_blank"
                style="color:#fff;text-decoration:none;display:flex;align-items:center;gap:6px;font-size:1em;"><i
                    class="fa-brands fa-ebay fa-xl" style="font-size:2em;"></i></a>
            <span style="color:#fff;font-size:1.3em;padding:0 16px;">|</span>
            <a href="#"
                style="color:#fff;text-decoration:none;display:flex;align-items:center;gap:6px;font-size:1em;"><i
                    class="fas fa-shipping-fast"></i> Shipping</a>
            <span style="color:#fff;font-size:1.3em;padding:0 16px;">|</span>
            <a href="#"
                style="color:#fff;text-decoration:none;display:flex;align-items:center;gap:6px;font-size:1em;"><i
                    class="fas fa-info-circle"></i> About</a>
        </div>

        <div>
            <p style="font-weight:bold;color:#fff;font-size:0.80em;margin:10px 0 0 0;">


                <a href="https://www.ebay.com/sch/i.html?rt=nc&_ssn=lotsofcards-gsc&_dmd=2&mkcid=1&mkrid=711-53200-19255-0&siteid=0&campid=5339025312&customid=&toolid=10001&LH_BIN=1"
                    target="_blank" style="text-decoration:none;font-weight:bold;">
                    <span style="color:#ffff;">BUY IT NOW</span>
                </a> |

                <a href="https://www.ebay.com/sch/i.html?rt=nc&_ssn=lotsofcards-gsc&_dmd=2&mkcid=1&mkrid=711-53200-19255-0&siteid=0&campid=5339025312&customid=&toolid=10001&LH_Auction=1"
                    target="_blank" style="text-decoration:none;font-weight:bold;">
                    <span style="color:#ffff;">AUCTIONS</span>
                </a> |
                <a href="#" style="text-decoration:none;font-weight:bold;">
                    <span style="color:#ffff;">SLABS</span>
                </a> |
                <a href="#" style="text-decoration:none;font-weight:bold;">
                    <span style="color:#ffff;">COLLECTABLES</span>
                </a>

            </p>
        </div>
        <div class="footer-social-icons">
            <a href="https://www.facebook.com/geeksportscards" target="_blank" rel="noopener noreferrer">
                <i class="fab fa-facebook fa-xl"></i>
            </a>
            <!-- <a href="https://www.linkedin.com" target="_blank" rel="noopener noreferrer">
                <i class="fab fa-linkedin fa-xl"></i>
            </a> -->
            <a href="https://www.instagram.com/geek_sports_cards/" target="_blank" rel="noopener noreferrer">
                <i class="fab fa-instagram fa-xl"></i>
            </a>
            <a href="mailto:info@geeksportscards.com" title="Email info@geeksportscards.com">
                <i class="fa-solid fa-envelope" style="font-size:1.40em; padding-top:2px;"></i>
            </a>
        </div>

        <span style="display:block;font-size:0.80em;margin-top:2px;">&copy; 2025 Geek Sports Cards and
            Collectables</span>
        <button id="backToTopBtn" aria-label="Back to Top" type="button"><i class="fas fa-arrow-up"
                style="font-size:1.1em;color:#fff;"></i></button>
    </div>

    <script>
        // Show back-to-top button when .custom-header is out of view
        (function () {
            function initBackToTop() {
                const header = document.querySelector('.custom-header');
                const btn = document.getElementById('backToTopBtn');
                if (!header || !btn) return;
                const io = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            btn.classList.remove('visible');
                        } else {
                            btn.classList.add('visible');
                        }
                    });
                }, { threshold: 0 });
                io.observe(header);
                function scrollToHeaderSmooth() {
                    try {
                        // Prefer scrolling the header into view for consistent placement
                        if (header && typeof header.scrollIntoView === 'function') {
                            header.scrollIntoView({ behavior: 'smooth', block: 'start' });
                            return;
                        }
                    } catch (err) {
                        // fallback to scrolling to top if header unavailable
                    }
                    const scEl = document.scrollingElement || document.documentElement || document.body;
                    try {
                        if (scEl && typeof scEl.scrollTo === 'function') {
                            scEl.scrollTo({ top: 0, behavior: 'smooth' });
                            return;
                        }
                    } catch (err) {
                        // fall through to setting scrollTop
                    }
                    if (scEl) scEl.scrollTop = 0;
                    window.scrollTo(0, 0);
                }
                btn.addEventListener('click', function (e) {
                    // ensure default button behavior doesn't interfere
                    if (e && typeof e.preventDefault === 'function') e.preventDefault();
                    scrollToHeaderSmooth();
                });
                // keyboard accessibility (Enter / Space)
                btn.addEventListener('keydown', function (e) {
                    if (e.key === 'Enter' || e.key === ' ' || e.key === 'Spacebar') {
                        if (e && typeof e.preventDefault === 'function') e.preventDefault();
                        scrollToHeaderSmooth();
                    }
                });
            }
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initBackToTop);
            } else {
                initBackToTop();
            }
        })();
        // Auto-scroll to top when the user scrolls past half the document height
        (function () {
            function initAutoScroll() {
                let autoTriggered = false;
                let lastScroll = 0;
                const resetThreshold = 50; // px from top to reset

                function onScroll() {
                    const scrollY = window.scrollY || window.pageYOffset;
                    const docHeight = Math.max(document.documentElement.scrollHeight, document.body.scrollHeight);
                    const half = docHeight / 2;
                    const scrollingDown = scrollY > lastScroll;
                    lastScroll = scrollY;

                    if (!autoTriggered && scrollingDown && scrollY > half) {
                        autoTriggered = true;
                        // smooth scroll to top
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    }

                    // reset so the auto-scroll can trigger again after user returns near top
                    if (autoTriggered && scrollY < resetThreshold) {
                        autoTriggered = false;
                    }
                }

                window.addEventListener('scroll', onScroll, { passive: true });
            }
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initAutoScroll);
            } else {
                initAutoScroll();
            }
        })();
    </script>

    <script>
        // Ensure --footer-height CSS variable matches the rendered footer height.
        (function syncFooterHeightVar() {
            const footer = document.querySelector('.custom-footer');
            if (!footer) return;
            function setVar() {
                const h = footer.offsetHeight || 64;
                // set on the footer itself (fallback) and on :root for global use
                footer.style.setProperty('--footer-height', h + 'px');
                document.documentElement.style.setProperty('--footer-height', h + 'px');
            }
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', setVar);
            } else {
                setVar();
            }

            // Prefer ResizeObserver for precise updates; fall back to window resize
            if (window.ResizeObserver) {
                try {
                    const ro = new ResizeObserver(() => setVar());
                    ro.observe(footer);
                } catch (e) {
                    window.addEventListener('resize', setVar);
                }
            } else {
                window.addEventListener('resize', setVar);
            }
        })();
    </script>

</body>

</html>